
<h1><%= t(".harami_vid_long")%> <%= "[HaramiVid]" if can?(:edit, @harami_vid) %> (<%= @harami_vid.release_date %>) <%= ((@harami_vid.channel && (owner=@harami_vid.channel.channel_owner) != Artist.default(:HaramiVid)) ? "by #{owner.title_or_alt(langcode: I18n.locale, lang_fallback_option: :either)}" : "") %></h1>

<hr>
<section id="harami_vids_show_parameters">
<%= render partial: 'layouts/all_registered_translations', locals: {model: @harami_vid, add_buttons: false} %>
 <section id="harami_vids_show_unique_parameters">
 <dl>
  <dt class="item_pid"> pID:</dt>
  <dd class="item_pid"><%= @harami_vid.id %></dd>

  <dt class="item_release_date"> <%= t("tables.release_date") %>:</dt>
  <dd class="item_release_date"><%= date2text(@harami_vid.release_date) %></dd> <%# defined in ModuleCommon %>

  <dt class="item_duration"> <%= t("tables.duration") %> (HH:MM:SS):</dt>
  <dd class="item_duration"><%= dura=@harami_vid.duration %><%= dura ? " ("+sec2hms_or_ms(dura)+")" : "" %></dd>

  <dt class="item_uri"> URI:</dt>
  <dd class="item_uri"><%= link_to_youtube(@harami_vid.uri, @harami_vid.uri, target: true) %></dd>

  <dt class="item_channel"> <%= t(:Channel) %>:</dt>
  <dd class="item_channel">
    <% ch_str = (chan=@harami_vid.channel).title_or_alt(langcode: I18n.locale, lang_fallback_option: :either) %>
    「<em><%= (can?(:show, chan) ? link_to(ch_str, chan) : ch_str) %></em>」:
    <span class="channel_platform"><%= @harami_vid.channel.channel_platform.title_or_alt(langcode: I18n.locale, lang_fallback_option: :either) %></span>
      (<%= t("harami_vids.table_head_ChannelType", default: "Type") %>: <span class="channel_type"><%= @harami_vid.channel.channel_type.title_or_alt(langcode: I18n.locale, lang_fallback_option: :either) %></span>)
    by <span class="channel_owner"><%= @harami_vid.channel.channel_owner.title_or_alt(langcode: I18n.locale, lang_fallback_option: :either) %></span>
  </dd>

  <dt class="item_event"> <%= t(:Events) %> [<%= t(:EventGroup)%>]:</dt>
  <dd class="item_event">
    <%= render partial: "event_event_items" %>
  </dd>

  <dt class="item_place"> <%= t("tables.place_country") %>:</dt>
  <dd class="item_place"><%= show_pref_place_country(@harami_vid.place) %></dd>  <%# defined in places_helper.rb %>

  <% if can? :edit, @harami_vid %>
    <div class="editor_only">
      <dt> <%= t("datagrid.form.uri_playlist", langcode: t("locale.long.ja")) %>:</dt>
      <dd><%= uri=@harami_vid.uri_playlist_ja; (uri.blank? ? '' : link_to_youtube(uri, uri)) %></dd>

      <dt> <%= t("datagrid.form.uri_playlist", langcode: t("locale.long.en")) %>:</dt>
      <dd><%= uri=@harami_vid.uri_playlist_en; (uri.blank? ? '' : link_to_youtube(uri, uri)) %></dd>
    </div>
  <% end %>

  <dt class="item_note"> <%= t("tables.note") %>:</dt>
  <dd class="item_note"><%= @harami_vid.note %></dd>
 </dl>
 </section> <!-- section id="harami_vids_show_unique_parameters" -->
</section> <!-- section id="harami_vids_show_parameters" -->

<%= link_to t("layouts.back_to_index"), harami_vids_path %>

<% if can? :update, @harami_vid %>
  <div class="editor_only">
    <br>
      <%= link_to '→ Edit', edit_harami_vid_path(@harami_vid), id: "main_edit_button", class: "lead" %>
    <%# No "Destroy" button %>
    <% if "youtube" == @harami_vid.channel.channel_platform.mname %>
      <div id="modify_by_youtube" class="float-end">
      <%= form_with method: :patch, model: @harami_vid, url: harami_vids_fetch_youtube_datum_path(@harami_vid), local: true do |form| %> <%# scope: :article %>
        <%= form.fields_for :fetch_youtube_datum do |fyd_form| %>
          <%= fyd_form.hidden_field :uri_youtube, value: @harami_vid.uri %>
        <% end %>
        <div class="actions">
          <%= form.submit "Import Youtube",
            class: "btn btn-info", title: 'Modify data according to the Youtube data.' %> <%# , :name => PostsController::FORM_SUBMIT_INSERTION_WITHIN_NAME, %>
          <%# submit_tag "Import Youtube",
            class: "btn btn-info", title: 'Modify data according to the Youtube data.' %> <%# , :name => PostsController::FORM_SUBMIT_INSERTION_WITHIN_NAME, %>
        </div>
      <% end %>
      </div>
      <%# link_to 'Import Youtube', harami_vids_fetch_youtube_datum_path(@harami_vid), id: "href_edit_harami_vid_youtube_import", method: :patch, class: "button_like float-end", remote: true, data: { harami_vid: { fetch_youtube_data: {uri_youtube: @harami_vid.uri}} } %>
    <% end %>
    <br>
    Copying Events of this HaramiVid,
    <%= link_to t("layouts.new").capitalize+" HaramiVid", new_harami_vid_path(params: {reference_harami_vid_id: @harami_vid.id}) %> |
    <input type="text" id="pid_edit_harami_vid_with_ref" class="input_12em" placeholder="pID of HaramiVid to edit">
    <a href="#" id="href_edit_harami_vid_with_ref" class="button_like">Edit another HaramiVid</a>
  </div>
<% end %>

  <%# button_to 'Edit another HaramiVid', "#", method: :get, id: "href_edit_harami_vid_with_ref", form_css: "inline_form" %>

<hr>
<%= render partial: 'music_table', locals: {harami_vid: @harami_vid, add_buttons: true} %>
<hr>
<%= render partial: 'other_harami_vids_table', locals: {harami_vid: @harami_vid} %>
<% if can? :read, Harami1129 %>
 <div class="editor_only">
  <hr>
  <%= render partial: 'harami1129_table', locals: {harami_vid: @harami_vid, add_buttons: true} %>
 </div>
<% end %>

