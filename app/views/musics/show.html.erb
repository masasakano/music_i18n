<h1><%= t(:Music) %>: <%= @music.title_or_alt_tuple_str("[", "]", langcode: I18n.locale) %> (by <%= artist=@music.most_significant_artist; artist ? link_to(artist.title_or_alt(prefer_alt: false, langcode: I18n.locale, lang_fallback_option: :either, str_fallback: "", article_to_head: true), artist, title: "the guessed most significant artist") : 'Unknown' %><%= l(Date.new(@music.year), format: :year_comma) if @music.year %>)</h1>

<hr>
<section id="sec_primary">
  <section id="sec_primary_trans">
<%= render partial: 'layouts/all_registered_translations', locals: {model: @music, add_buttons: true} %>
  </section>
<hr>

 <section id="sec_primary_show">
<div id="<%= dom_id @music %>">
<dl>
  <% if (can_update=can?(:update, Music)) %>
    <div class="editor_only">
      <dt>pID (<%= @music.class.name %>)</dt>
      <dd> <%= @music.id %></dd>
    </div>
  <% end %>

  <dt class="item_year" title="Year"><strong><%= t(:Year_Title) %>:</strong></dt>
    <dd class="item_year"><%= @music.year %></dd>
  <dt class="item_place"> <%= t("tables.place_country", default: "Place (Country)") %>:</dt>
    <dd class="item_place"><%= show_pref_place_country(@music.place) %></dd>  <%# defined in places_helper.rb %>
  <dt class="item_genre" title="Genre"><strong><%= s=t(:Genre); can?(:update, Genre) ? (link_to s, genres_url) : s %>:</strong></dt>
    <dd class="item_genre"><%= sprintf('%s [%s]', *(%w(ja en).map{|i| @music.genre.title(langcode: i) || ''})) rescue 'nil' %></dd>
  <dt title="HaramiVid"><strong><%= link_to t(:HaramiVid), "#sec_harami_vids_for" %>:</strong></dt>
    <dd><%= t(:times, count: @music.harami_vids.count) %></dd>
  <dt class="item_note" title="Note"> <%= t("tables.note") %>:</dt>
    <dd class="item_note"><%= auto_link(@music.note) %></dd>
  <% if can_update %>
   <div class="editor_only">
     <dt>Updated at:</dt>
      <dd><%= @music.updated_at %></dd>
     <dt>Created at:</dt>
      <dd><%= @music.created_at %></dd>
   </div>
  <% end %>
</dl>
</div>
 </section> <%# closing section id="sec_primary_show" %>

<%= render partial: 'layouts/link_merge_destroy', locals: {model: @music,  is_to_edit: false} %>
</section> <%# closing section id="sec_primary" %>

<hr>

<section id="sec_artists_by">
<%= render partial: 'artists_table', locals: {music: @music, add_buttons: true} %>
</section>

<hr>

<section id="sec_harami_vids_for">
<h3><%= t("show.h2_harami_vid").pluralize(@music.harami_vids.count, I18n.locale) %><%= t("show.h2_for") %><%= t("Music") %>: <%= @music.title_or_alt %></h3>
<%= render partial: 'layouts/harami_vids_index', locals: {harami_vids: @music.harami_vids.order("harami_vids.release_date" => :desc), music: @music} %>
</section>

<% if can? :read, Harami1129 %>
  <hr>
  <section id="sec_harami1129s_for">
    <h3>Harami1129s<%= t("show.h2_for") %><%= t("Music") %>: <%= @music.title_or_alt(langcode: I18n.locale, lang_fallback_option: :either, article_to_head: true) %></h3>
    <%= render partial: 'layouts/harami1129s_table', locals: {harami1129s: @music.harami1129s} %>
  </section>
<% end %>

<hr>

<%= link_to t("layouts.back_to_index"), musics_path %>

