<h1>Music: <%= @music.title_or_alt %> (by <%= @music.artists.first.title_or_alt rescue 'Unknown' %><%= sprintf(", %d年", @music.year) if @music.year %>)</h1>

<hr>
<%= render partial: 'layouts/all_registered_translations', locals: {model: @music} %>
<hr>

<% if can? :update, @music %>
<p>
  <strong>Internal ID:</strong>
  <%= @music.id %>
</p>
<% end %>

<p>
  <strong>Year:</strong>
  <%= @music.year %>
</p>

<p>
  <strong>県・場所 (国):</strong>
  <%= @music.txt_place_pref_ctry %> 
</p>

<p>
  <strong><%= can?(:update, Genre) ? (link_to 'Genre', genres_url) : 'Genre' %>:</strong>
  <%= sprintf('%s [%s]', *(%w(ja en).map{|i| @music.genre.title(langcode: i) || ''})) rescue 'nil' %>
</p>

<p>
  <strong><%= link_to 'Harami Vids', harami_vids_url %>:</strong>
  <%= sprintf '%d回', @music.harami_vids.count %>
  <% if false %>
  <%= hs = @music.harami_vids.map{|i| [i.id, i.release_date]}.to_h;
        sprintf('%d回 [%s]', hs.size, hs.map{|k,v| link_to v, harami_vid_url(k)}.join(', ')).html_safe %>
  <% end %>
</p>

<p>
  <strong>Note:</strong>
  <%= @music.note %>
</p>

<%= render partial: 'layouts/link_merge_destroy', locals: {model: @music} %>

<hr>

<%= render partial: 'artists_table', locals: {music: @music, add_buttons: true} %>

<hr>

<%= render partial: 'harami_vids_table', locals: {music: @music, add_buttons: true} %>

<% if can? :read, Harami1129 %>
  <hr>
  <%= render partial: 'harami1129s_table', locals: {music: @music} %>
<% end %>

<hr>

<%= render partial: 'link_merge_destroy', locals: {model: @music,  is_to_edit: false} %>

